!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1);window.Powerbi=o["default"],window.powerbi=new o["default"]},function(e,t,n){"use strict";var o=n(2),r=n(5),i=n(4),s=function(){function e(t){var n=this;void 0===t&&(t={}),this.get=this.embed,this.embeds=[],window.addEventListener("message",this.onReceiveMessage.bind(this),!1),this.config=i["default"].assign({},e.defaultConfig,t),this.config.autoEmbedOnContentLoaded&&window.addEventListener("DOMContentLoaded",function(e){return n.init(document.body)},!1)}return e.prototype.init=function(e){var t=this;e=e&&e instanceof HTMLElement?e:document.body;var n=Array.prototype.slice.call(e.querySelectorAll("[powerbi-embed]"));n.forEach(function(e){return t.embed(e,{getGlobalAccessToken:function(){return t.accessToken}})})},e.prototype.embed=function(t,n){var o=this;void 0===n&&(n={});var r;if(t.powerBiEmbed&&!n.overwrite)return r=t.powerBiEmbed;t.powerBiEmbed&&n.overwrite&&this.remove(t.powerBiEmbed);var s=i["default"].find(function(e){return n.type===e.attribute||null!==t.getAttribute(e.attribute)},e.components);if(!s)throw new Error("Attempted to embed using config "+n+" on element "+t.outerHTML+", but could not determine what type of component to embed. You must specify a type in the configuration or as an attribute such as 'powerbi-report'.");return n.getGlobalAccessToken=function(){return o.accessToken},r=new s(t,n),t.powerBiEmbed=r,this.embeds.push(r),r},e.prototype.remove=function(e){i["default"].remove(function(t){return t===e},this.embeds)},e.prototype.onReceiveMessage=function(t){if(t)try{var n=JSON.parse(t.data);this.embeds.some(function(o){return t.source===o.iframe.contentWindow?(i["default"].raiseCustomEvent(o.element,e.eventMap[n.event],n),!0):!1})}catch(o){if("function"!=typeof this.config.onError)throw o;this.config.onError.call(window,o)}},e.components=[r["default"],o["default"]],e.eventMap={tileClicked:"tile-click",tileLoaded:"tile-load",reportPageLoaded:"report-load"},e.defaultConfig={autoEmbedOnContentLoaded:!1,onError:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return console.log(e[0],e.slice(1))}},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(3),i=function(e){function t(t,n){n.loadAction="loadReport",e.call(this,t,n)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);if(!t){var n=this.options.id;if(n||(n=this.element.getAttribute("powerbi-report")),!n)throw new Error("Embed url cannot be constructed. 'powerbi-embed' attribute was not specified and the fallback to 'powerbi-report' were not specified either.");t="https://embedded.powerbi.com/appTokenReportEmbed?reportId="+n}return this.options.filterPaneEnabled||(t+="&filterPaneEnabled=false"),t},t.attribute="powerbi-report",t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,n){"use strict";var o=n(4),r=function(){function e(t,n){this.element=t,this.options=o["default"].assign({},e.defaultOptions,n);var r=this.getEmbedUrl(),i='<iframe style="width:100%;height:100%;" src="'+r+'" scrolling="no" allowfullscreen="true"></iframe>';this.element.innerHTML=i,this.iframe=this.element.childNodes[0],this.iframe.addEventListener("load",this.load.bind(this),!1)}return e.prototype.load=function(){var e=window.getComputedStyle(this.element),t=this.getAccessToken(),n={message:{action:this.options.loadAction,accessToken:t,width:e.width,height:e.height}};o["default"].raiseCustomEvent(this.element,"embed-init",n),this.iframe.contentWindow.postMessage(JSON.stringify(n.message),"*")},e.prototype.getAccessToken=function(){var e=this.options.accessToken||this.element.getAttribute("powerbi-access-token")||this.options.getGlobalAccessToken();if(!e)throw new Error("No access token was found for element. You must specify an access token directly on the element using attribute 'powerbi-access-token' or specify a global token at: powerbi.accessToken.");return e},e.prototype.getEmbedUrl=function(){var e=this.options.embedUrl||this.element.getAttribute("powerbi-embed");return e},e.prototype.fullscreen=function(){var e=this.iframe.requestFullscreen||this.iframe.msRequestFullscreen||this.iframe.mozRequestFullScreen||this.iframe.webkitRequestFullscreen;e.call(this.iframe)},e.prototype.exitFullscreen=function(){if(this.isFullscreen(this.iframe)){var e=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;e.call(document)}},e.prototype.isFullscreen=function(e){var t=["fullscreenElement","webkitFullscreenElement","mozFullscreenScreenElement","msFullscreenElement"];return t.some(function(t){return document[t]===e})},e.defaultOptions={filterPaneEnabled:!0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t){"use strict";var n=function(){function e(){}return e.raiseCustomEvent=function(e,t,n){var o;if("function"==typeof window.CustomEvent?o=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(o),!o.defaultPrevented&&o.returnValue){var r="on"+t.replace("-",""),i=e.getAttribute(r);i&&eval.call(e,i)}},e.findIndex=function(e,t){if(!Array.isArray(t))throw new Error("You attempted to call find with second that was not an array. You passed: "+t);var n;return t.some(function(t,o){return e(t)?(n=o,!0):void 0}),n},e.find=function(t,n){var o=e.findIndex(t,n);return n[o]},e.remove=function(t,n){var o=e.findIndex(t,n);n.splice(o,1)},e.assign=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[0];if(void 0===n||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])}return o},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(3),i=function(e){function t(t,n){n.loadAction="loadTile",e.call(this,t,n)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);if(!t){var n=this.element.getAttribute("powerbi-dashboard"),o=this.element.getAttribute("powerbi-tile");if(!n||!o)throw new Error("Embed url cannot be constructed. 'powerbi-embed' attribute was not specified and the fallback to 'powerbi-dashboard' and 'powerbi-tile' were not specified either.");t="https://app.powerbi.com/embed?dashboardId="+n+"&tileId="+o}return t},t.attribute="powerbi-tile",t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvd2VyYmkuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiY29yZV8xIiwid2luZG93IiwiUG93ZXJiaSIsInBvd2VyYmkiLCJyZXBvcnRfMSIsInRpbGVfMSIsInV0aWxfMSIsIlBvd2VyQmkiLCJjb25maWciLCJfdGhpcyIsInRoaXMiLCJnZXQiLCJlbWJlZCIsImVtYmVkcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblJlY2VpdmVNZXNzYWdlIiwiYmluZCIsImFzc2lnbiIsImRlZmF1bHRDb25maWciLCJhdXRvRW1iZWRPbkNvbnRlbnRMb2FkZWQiLCJldmVudCIsImluaXQiLCJkb2N1bWVudCIsImJvZHkiLCJwcm90b3R5cGUiLCJjb250YWluZXIiLCJIVE1MRWxlbWVudCIsImVsZW1lbnRzIiwiQXJyYXkiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsImdldEdsb2JhbEFjY2Vzc1Rva2VuIiwiYWNjZXNzVG9rZW4iLCJpbnN0YW5jZSIsInBvd2VyQmlFbWJlZCIsIm92ZXJ3cml0ZSIsInJlbW92ZSIsIkNvbXBvbmVudCIsImZpbmQiLCJjb21wb25lbnQiLCJ0eXBlIiwiYXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwiY29tcG9uZW50cyIsIkVycm9yIiwib3V0ZXJIVE1MIiwicHVzaCIsIngiLCJtZXNzYWdlRGF0YSIsIkpTT04iLCJwYXJzZSIsImRhdGEiLCJzb21lIiwic291cmNlIiwiaWZyYW1lIiwiY29udGVudFdpbmRvdyIsInJhaXNlQ3VzdG9tRXZlbnQiLCJldmVudE1hcCIsImUiLCJvbkVycm9yIiwidGlsZUNsaWNrZWQiLCJ0aWxlTG9hZGVkIiwicmVwb3J0UGFnZUxvYWRlZCIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX19leHRlbmRzIiwiZCIsImIiLCJfXyIsImNvbnN0cnVjdG9yIiwiaGFzT3duUHJvcGVydHkiLCJjcmVhdGUiLCJlbWJlZF8xIiwiUmVwb3J0IiwiX3N1cGVyIiwib3B0aW9ucyIsImxvYWRBY3Rpb24iLCJnZXRFbWJlZFVybCIsImVtYmVkVXJsIiwicmVwb3J0SWQiLCJmaWx0ZXJQYW5lRW5hYmxlZCIsIkVtYmVkIiwiZGVmYXVsdE9wdGlvbnMiLCJpZnJhbWVIdG1sIiwiaW5uZXJIVE1MIiwiY2hpbGROb2RlcyIsImxvYWQiLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldEFjY2Vzc1Rva2VuIiwiaW5pdEV2ZW50QXJncyIsIm1lc3NhZ2UiLCJhY3Rpb24iLCJ3aWR0aCIsImhlaWdodCIsInBvc3RNZXNzYWdlIiwic3RyaW5naWZ5IiwiZnVsbHNjcmVlbiIsInJlcXVlc3RGdWxsU2NyZWVuIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJtc1JlcXVlc3RGdWxsc2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJ3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiIsImV4aXRGdWxsc2NyZWVuIiwiaXNGdWxsc2NyZWVuIiwibW96Q2FuY2VsRnVsbFNjcmVlbiIsIndlYmtpdEV4aXRGdWxsc2NyZWVuIiwibXNFeGl0RnVsbHNjcmVlbiIsIm9wdGlvbiIsIlV0aWxzIiwiZXZlbnROYW1lIiwiZXZlbnREYXRhIiwiY3VzdG9tRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiZGVmYXVsdFByZXZlbnRlZCIsInJldHVyblZhbHVlIiwiaW5saW5lRXZlbnRBdHRyIiwicmVwbGFjZSIsImlubGluZVNjcmlwdCIsImV2YWwiLCJmaW5kSW5kZXgiLCJwcmVkaWNhdGUiLCJ4cyIsImlzQXJyYXkiLCJpbmRleCIsImkiLCJzcGxpY2UiLCJ0YXJnZXQiLCJ1bmRlZmluZWQiLCJUeXBlRXJyb3IiLCJvdXRwdXQiLCJuZXh0S2V5IiwiVGlsZSIsImRhc2hib2FyZElkIiwidGlsZUlkIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQUtULFFBQVNDLEdBQW9CQyxHQUc1QixHQUFHQyxFQUFpQkQsR0FDbkIsTUFBT0MsR0FBaUJELEdBQVVFLE9BR25DLElBQUlDLEdBQVNGLEVBQWlCRCxJQUM3QkUsV0FDQUUsR0FBSUosRUFDSkssUUFBUSxFQVVULE9BTkFQLEdBQVFFLEdBQVVNLEtBQUtILEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNILEdBRy9ESSxFQUFPRSxRQUFTLEVBR1RGLEVBQU9ELFFBdkJmLEdBQUlELEtBcUNKLE9BVEFGLEdBQW9CUSxFQUFJVCxFQUd4QkMsRUFBb0JTLEVBQUlQLEVBR3hCRixFQUFvQlUsRUFBSSxHQUdqQlYsRUFBb0IsS0FLL0IsU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0IsWUFDQSxJQUFJVyxHQUFTWCxFQUFvQixFQU1qQ1ksUUFBT0MsUUFBVUYsRUFBQUEsV0FDakJDLE9BQU9FLFFBQVUsR0FBSUgsR0FBQUEsWUFLaEIsU0FBU1AsRUFBUUQsRUFBU0gsR0FFL0IsWUFDQSxJQUFJZSxHQUFXZixFQUFvQixHQUMvQmdCLEVBQVNoQixFQUFvQixHQUM3QmlCLEVBQVNqQixFQUFvQixHQUM3QmtCLEVBQVcsV0FDWCxRQUFTQSxHQUFRQyxHQUNiLEdBQUlDLEdBQVFDLElBQ0csVUFBWEYsSUFBcUJBLE1BS3pCRSxLQUFLQyxJQUFNRCxLQUFLRSxNQUNoQkYsS0FBS0csVUFDTFosT0FBT2EsaUJBQWlCLFVBQVdKLEtBQUtLLGlCQUFpQkMsS0FBS04sT0FBTyxHQUVyRUEsS0FBS0YsT0FBU0YsRUFBQUEsV0FBZVcsVUFBV1YsRUFBUVcsY0FBZVYsR0FDM0RFLEtBQUtGLE9BQU9XLDBCQUNabEIsT0FBT2EsaUJBQWlCLG1CQUFvQixT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QixNQW5CQVYsR0FBVXlFLEVBQU1oRSxHQU1oQmdFLEVBQUszSCxVQUFVOEQsWUFBYyxXQUN6QixHQUFJQyxHQUFXSixFQUFPM0QsVUFBVThELFlBQVkxRixLQUFLYyxLQUNqRCxLQUFLNkUsRUFBVSxDQUNYLEdBQUk2RCxHQUFjMUksS0FBS3NCLFFBQVFZLGFBQWEscUJBQ3hDeUcsRUFBUzNJLEtBQUtzQixRQUFRWSxhQUFhLGVBQ3ZDLEtBQU13RyxJQUFlQyxFQUNqQixLQUFNLElBQUl2RyxPQUFNLHFLQUVwQnlDLEdBQVcsNkNBQStDNkQsRUFBYyxXQUFhQyxFQUV6RixNQUFPOUQsSUFFWDRELEVBQUt4RyxVQUFZLGVBQ1Z3RyxHQUNUbEUsRUFBQUEsV0FDRlYsUUFBT0MsZUFBZWhGLEVBQVMsY0FBZ0JpRixPQUFPLElBQ3REakYsRUFBQUEsV0FBa0IySiIsImZpbGUiOiJwb3dlcmJpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxyXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcclxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xyXG4vKioqKioqL1xyXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xyXG4vKioqKioqL1xyXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXHJcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XHJcbi8qKioqKiovXHJcbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxyXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xyXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcclxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxyXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXHJcbi8qKioqKiovIFx0XHR9O1xyXG4vKioqKioqL1xyXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXHJcbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcclxuLyoqKioqKi9cclxuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcclxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xyXG4vKioqKioqL1xyXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcclxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcclxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xyXG4vKioqKioqL1xyXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXHJcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcclxuLyoqKioqKi9cclxuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xyXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XHJcbi8qKioqKiovXHJcbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXHJcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XHJcbi8qKioqKiovIH0pXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbi8qKioqKiovIChbXHJcbi8qIDAgKi9cclxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcblxyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdC8qKlxyXG5cdCAqIE1ha2UgUG93ZXJCaSBhdmFpbGFibGUgb24gZ2xvYmFsIG9iamVjdCBmb3IgdXNlIGluIGFwcHMgd2l0aG91dCBtb2R1bGUgbG9hZGluZyBzdXBwb3J0LlxyXG5cdCAqIFNhdmUgY2xhc3MgdG8gYWxsb3cgY3JlYXRpbmcgYW4gaW5zdGFuY2Ugb2YgdGhlIHNlcnZpY2UuXHJcblx0ICogQ3JlYXRlIGluc3RhbmNlIG9mIGNsYXNzIHdpdGggZGVmYXVsdCBjb25maWcgZm9yIG5vcm1hbCB1c2FnZS5cclxuXHQgKi9cclxuXHR3aW5kb3cuUG93ZXJiaSA9IGNvcmVfMS5kZWZhdWx0O1xyXG5cdHdpbmRvdy5wb3dlcmJpID0gbmV3IGNvcmVfMS5kZWZhdWx0KCk7XHJcblxyXG5cclxuLyoqKi8gfSxcclxuLyogMSAqL1xyXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcclxuXHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIHJlcG9ydF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgdGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcclxuXHR2YXIgdXRpbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHR2YXIgUG93ZXJCaSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFBvd2VyQmkoY29uZmlnKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcblx0ICAgICAgICAvKipcclxuXHQgICAgICAgICAqIERlcHJlY2F0ZWQgYWxpYXMgZm9yIGVtYmVkLlxyXG5cdCAgICAgICAgICogVGhpcyBwZXJmb3JtZWQgdGhlIHNhbWUgZnVuY3Rpb24gYXMgZW1iZWQuIEVtYmVkIGlzIG1vcmUgc2VtYW50aWMgdG8gdGhlIG9wZXJhdGlvbiBwZXJmb3JtZWQgc28gd2UgY29uc2xpZGF0ZWQgdG8gYSBzaW5nbGUgbWV0aG9kLlxyXG5cdCAgICAgICAgICovXHJcblx0ICAgICAgICB0aGlzLmdldCA9IHRoaXMuZW1iZWQ7XHJcblx0ICAgICAgICB0aGlzLmVtYmVkcyA9IFtdO1xyXG5cdCAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm9uUmVjZWl2ZU1lc3NhZ2UuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG5cdCAgICAgICAgLy8gVE9ETzogQ2hhbmdlIHdoZW4gT2JqZWN0LmFzc2lnbiBpcyBhdmFpbGFibGUuXHJcblx0ICAgICAgICB0aGlzLmNvbmZpZyA9IHV0aWxfMS5kZWZhdWx0LmFzc2lnbih7fSwgUG93ZXJCaS5kZWZhdWx0Q29uZmlnLCBjb25maWcpO1xyXG5cdCAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1dG9FbWJlZE9uQ29udGVudExvYWRlZCkge1xyXG5cdCAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5pbml0KGRvY3VtZW50LmJvZHkpOyB9LCBmYWxzZSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgZm9yIERPTUNvbnRlbnRMb2FkZWQgd2hpY2ggc2VhcmNoZXMgRE9NIGZvciBlbGVtZW50cyBoYXZpbmcgJ3Bvd2VyYmktZW1iZWQnIGF0dHJpYnV0ZVxyXG5cdCAgICAgKiBhbmQgYXV0b21hdGljYWxseSBhdHRlbXB0cyB0byBlbWJlZCBhIHBvd2VyYmkgY29tcG9uZW50IGJhc2VkIG9uIGluZm9ybWF0aW9uIGZyb20gdGhlIGF0dHJpYnV0ZXMuXHJcblx0ICAgICAqIE9ubHkgcnVucyBpZiBgY29uZmlnLmF1dG9FbWJlZE9uQ29udGVudExvYWRlZGAgaXMgdHJ1ZSB3aGVuIHRoZSBzZXJ2aWNlIGlzIGNyZWF0ZWQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGNvbnRhaW5lciA9IChjb250YWluZXIgJiYgY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpID8gY29udGFpbmVyIDogZG9jdW1lbnQuYm9keTtcclxuXHQgICAgICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbcG93ZXJiaS1lbWJlZF0nKSk7XHJcblx0ICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBfdGhpcy5lbWJlZChlbGVtZW50LCB7IGdldEdsb2JhbEFjY2Vzc1Rva2VuOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hY2Nlc3NUb2tlbjsgfSB9KTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHaXZlbiBhbiBodG1sIGVsZW1lbnQgZW1iZWQgY29tcG9uZW50IGJhc2VkIG9uIGNvbmZpZ3VyYXRpb24uXHJcblx0ICAgICAqIElmIGNvbXBvbmVudCBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWQgYW5kIGF0dGFjaGVkIHRvIGVsZWVtbnQgc2ltcGx5IHJldHVybiBpdCB0byBwcmV2ZW50IGNyZWF0aW5nIGR1cGxpY2F0ZSBjb21wb25lbnRzIGZvciBzYW1lIGVsZW1lbnQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5lbWJlZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuXHQgICAgICAgIHZhciBpbnN0YW5jZTtcclxuXHQgICAgICAgIGlmIChlbGVtZW50LnBvd2VyQmlFbWJlZCAmJiAhY29uZmlnLm92ZXJ3cml0ZSkge1xyXG5cdCAgICAgICAgICAgIGluc3RhbmNlID0gZWxlbWVudC5wb3dlckJpRW1iZWQ7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgLyoqIElmIGNvbXBvbmVudCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQgb24gdGhpcyBlbGVtZW50LCBidXQgd2UgYXJlIHN1cHBvc2VkIHRvIG92ZXJ3cml0ZSwgcmVtb3ZlIGV4aXN0aW5nIGNvbXBvbmVudCBmcm9tIHJlZ2lzdHJ5ICovXHJcblx0ICAgICAgICBpZiAoZWxlbWVudC5wb3dlckJpRW1iZWQgJiYgY29uZmlnLm92ZXJ3cml0ZSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlKGVsZW1lbnQucG93ZXJCaUVtYmVkKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBDb21wb25lbnQgPSB1dGlsXzEuZGVmYXVsdC5maW5kKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIGNvbmZpZy50eXBlID09PSBjb21wb25lbnQuYXR0cmlidXRlIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGNvbXBvbmVudC5hdHRyaWJ1dGUpICE9PSBudWxsOyB9LCBQb3dlckJpLmNvbXBvbmVudHMpO1xyXG5cdCAgICAgICAgaWYgKCFDb21wb25lbnQpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZW1iZWQgdXNpbmcgY29uZmlnIFwiICsgY29uZmlnICsgXCIgb24gZWxlbWVudCBcIiArIGVsZW1lbnQub3V0ZXJIVE1MICsgXCIsIGJ1dCBjb3VsZCBub3QgZGV0ZXJtaW5lIHdoYXQgdHlwZSBvZiBjb21wb25lbnQgdG8gZW1iZWQuIFlvdSBtdXN0IHNwZWNpZnkgYSB0eXBlIGluIHRoZSBjb25maWd1cmF0aW9uIG9yIGFzIGFuIGF0dHJpYnV0ZSBzdWNoIGFzICdwb3dlcmJpLXJlcG9ydCcuXCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgcmVtb3ZpbmcgaW4gZmF2b3Igb2YgcGFzc2luZyByZWZlcmVuY2UgdG8gYHRoaXNgIGluIGNvbnN0cnVjdG9yXHJcblx0ICAgICAgICAvLyBUaGUgZ2V0R2xvYmFsQWNjZXNzVG9rZW4gZnVuY3Rpb24gaXMgb25seSBoZXJlIHNvIHRoYXQgdGhlIGNvbXBvbmVudHMgKFRpbGUgfCBSZXBvcnQpIGNhbiBnZXQgdGhlIGdsb2JhbCBhY2Nlc3MgdG9rZW4gd2l0aG91dCBuZWVkaW5nIHJlZmVyZW5jZVxyXG5cdCAgICAgICAgLy8gdG8gdGhlIHNlcnZpY2UgdGhhdCB0aGV5IGFyZSByZWdpc3RlcmVkIHdpdGhpbiBiZWNhdWVzIGl0IGNyZWF0ZXMgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXHJcblx0ICAgICAgICBjb25maWcuZ2V0R2xvYmFsQWNjZXNzVG9rZW4gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hY2Nlc3NUb2tlbjsgfTtcclxuXHQgICAgICAgIGluc3RhbmNlID0gbmV3IENvbXBvbmVudChlbGVtZW50LCBjb25maWcpO1xyXG5cdCAgICAgICAgZWxlbWVudC5wb3dlckJpRW1iZWQgPSBpbnN0YW5jZTtcclxuXHQgICAgICAgIHRoaXMuZW1iZWRzLnB1c2goaW5zdGFuY2UpO1xyXG5cdCAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogUmVtb3ZlIGNvbXBvbmVudCBmcm9tIHRoZSBsaXN0IG9mIGVtYmVkZGVkIGNvbXBvbmVudHMuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcblx0ICAgICAgICB1dGlsXzEuZGVmYXVsdC5yZW1vdmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPT09IGNvbXBvbmVudDsgfSwgdGhpcy5lbWJlZHMpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciBmb3Igd2luZG93IG1lc3NhZ2UgZXZlbnQuXHJcblx0ICAgICAqIFBhcnNlcyBldmVudCBkYXRhIGFzIGpzb24gYW5kIGlmIGl0IGNhbWUgZnJvbSBhbiBpZnJhbWUgdGhhdCBtYXRjaGVzIG9uZSBmcm9tIGFuIGV4aXN0aW5nIGVtYmVkZWQgY29tcG9uZW50IHJlLWRpc3BhdGNoZXMgdGhlIGV2ZW50IG9uIHRoZSBpZnJhbWUncyBwYXJlbnQgZWxlbWVudFxyXG5cdCAgICAgKiB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0aGUgdHdvIHNlcGFyYXRlIHdpbmRvd3MgLyBET01zLlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBJZiBhbiBlcnJvciBvY2N1cnMgd2hlbiBwYXJzaW5nIGV2ZW50LmRhdGEgY2FsbCBlcnJvciBoYW5kbGVyIHByb3ZpZGVkIGR1cmluZyBjb25maWd1cmF0aW9uLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUub25SZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgaWYgKCFldmVudCkge1xyXG5cdCAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRyeSB7XHJcblx0ICAgICAgICAgICAgdmFyIG1lc3NhZ2VEYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcclxuXHQgICAgICAgICAgICB0aGlzLmVtYmVkcy5zb21lKGZ1bmN0aW9uIChlbWJlZCkge1xyXG5cdCAgICAgICAgICAgICAgICAvLyBPbmx5IHJhaXNlIHRoZSBldmVudCBvbiB0aGUgZW1iZWQgdGhhdCBtYXRjaGVzIHRoZSBwb3N0IG1lc3NhZ2Ugb3JpZ2luXHJcblx0ICAgICAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGVtYmVkLmlmcmFtZS5jb250ZW50V2luZG93KSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICB1dGlsXzEuZGVmYXVsdC5yYWlzZUN1c3RvbUV2ZW50KGVtYmVkLmVsZW1lbnQsIFBvd2VyQmkuZXZlbnRNYXBbbWVzc2FnZURhdGEuZXZlbnRdLCBtZXNzYWdlRGF0YSk7XHJcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHQgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblx0ICAgICAgICAgICAgfSk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBjYXRjaCAoZSkge1xyXG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWcub25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5vbkVycm9yLmNhbGwod2luZG93LCBlKTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgICAgIHRocm93IGU7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogTGlzdCBvZiBjb21wb25lbnRzIHRoaXMgc2VydmljZSBjYW4gZW1iZWQuXHJcblx0ICAgICAqL1xyXG5cdCAgICAvLyBUT0RPOiBGaW5kIG91dCBob3cgdG8gdXNlIGludGVyZmFjZSBoZXJlIGluc3RlYWQgb2YgY29uY3JldGUgdHlwZSBzbyB3ZSBkb24ndCBoYXZlIHRvIFxyXG5cdCAgICAvLyB1c2UgdW5pb24gdHlwZXMgd2hpY2ggYXJlIG1haW50ZW5hbmNlIHByb2JsZW1cclxuXHQgICAgUG93ZXJCaS5jb21wb25lbnRzID0gW1xyXG5cdCAgICAgICAgdGlsZV8xLmRlZmF1bHQsXHJcblx0ICAgICAgICByZXBvcnRfMS5kZWZhdWx0XHJcblx0ICAgIF07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBNYXBwaW5nIG9mIGV2ZW50IG5hbWVzIGZyb20gaWZyYW1lIHBvc3RNZXNzYWdlIHRvIHRoZWlyIG5hbWUgcGVyY2lldmVkIGJ5IHBhcmVudCBET00uXHJcblx0ICAgICAqIEV4YW1wbGU6IFVzZXIgY2xpY2tzIG9uIGVtYmVkZWQgcmVwb3J0IHdoaWNoIGlzIGluc2lkZSBpZnJhbWUuIFRoZSBpZnJhbWUgY29kZSByZXNlbmRzXHJcblx0ICAgICAqIGV2ZW50IGFzIHBvc3RNZXNzYWdlIHdpdGggeyBldmVudDogJ3JlcG9ydENsaWNrZWQnLCAuLi4gfSBhbmQgdGhpcyBuYW1lIGlzIGNvbnZlcnRlZCB0byBoeXBoZW5hdGVkXHJcblx0ICAgICAqIG5hbWUgYW5kIGRpc3BhdGNoZWQgZnJvbSB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdGhlIGlmcmFtZSB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0d29cclxuXHQgICAgICogZGlmZmVyZW50IHdpbmRvd3MgLyBET01zXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLmV2ZW50TWFwID0ge1xyXG5cdCAgICAgICAgJ3RpbGVDbGlja2VkJzogJ3RpbGUtY2xpY2snLFxyXG5cdCAgICAgICAgJ3RpbGVMb2FkZWQnOiAndGlsZS1sb2FkJyxcclxuXHQgICAgICAgICdyZXBvcnRQYWdlTG9hZGVkJzogJ3JlcG9ydC1sb2FkJ1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRGVmYXVsdCBjb25maWd1cmF0aW9uIGZvciBzZXJ2aWNlLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5kZWZhdWx0Q29uZmlnID0ge1xyXG5cdCAgICAgICAgYXV0b0VtYmVkT25Db250ZW50TG9hZGVkOiBmYWxzZSxcclxuXHQgICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhhcmdzWzBdLCBhcmdzLnNsaWNlKDEpKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIFBvd2VyQmk7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUG93ZXJCaTtcclxuXHJcblxyXG4vKioqLyB9LFxyXG4vKiAyICovXHJcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG5cclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdH07XHJcblx0dmFyIGVtYmVkXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xyXG5cdHZhciBSZXBvcnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoUmVwb3J0LCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBSZXBvcnQoZWxlbWVudCwgb3B0aW9ucykge1xyXG5cdCAgICAgICAgLyoqIEZvcmNlIGxvYWRBY3Rpb24gb24gb3B0aW9ucyB0byBtYXRjaCB0aGUgdHlwZSBvZiBjb21wb25lbnQuIFRoaXMgaXMgcmVxdWlyZWQgdG8gYm9vdHN0cmFwIGlmcmFtZS4gKi9cclxuXHQgICAgICAgIG9wdGlvbnMubG9hZEFjdGlvbiA9ICdsb2FkUmVwb3J0JztcclxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGVsZW1lbnQsIG9wdGlvbnMpO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlcG9ydC5wcm90b3R5cGUuZ2V0RW1iZWRVcmwgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgZW1iZWRVcmwgPSBfc3VwZXIucHJvdG90eXBlLmdldEVtYmVkVXJsLmNhbGwodGhpcyk7XHJcblx0ICAgICAgICBpZiAoIWVtYmVkVXJsKSB7XHJcblx0ICAgICAgICAgICAgdmFyIHJlcG9ydElkID0gdGhpcy5vcHRpb25zLmlkO1xyXG5cdCAgICAgICAgICAgIGlmICghcmVwb3J0SWQpIHtcclxuXHQgICAgICAgICAgICAgICAgcmVwb3J0SWQgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdwb3dlcmJpLXJlcG9ydCcpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBpZiAoIXJlcG9ydElkKSB7XHJcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVtYmVkIHVybCBjYW5ub3QgYmUgY29uc3RydWN0ZWQuICdwb3dlcmJpLWVtYmVkJyBhdHRyaWJ1dGUgd2FzIG5vdCBzcGVjaWZpZWQgYW5kIHRoZSBmYWxsYmFjayB0byAncG93ZXJiaS1yZXBvcnQnIHdlcmUgbm90IHNwZWNpZmllZCBlaXRoZXIuXCIpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbWJlZFVybCA9IFwiaHR0cHM6Ly9lbWJlZGRlZC5wb3dlcmJpLmNvbS9hcHBUb2tlblJlcG9ydEVtYmVkP3JlcG9ydElkPVwiICsgcmVwb3J0SWQ7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICAvLyBUT0RPOiBOZWVkIHNhZmUgd2F5IHRvIGFkZCB1cmwgcGFyYW1ldGVycy5cclxuXHQgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmZpbHRlclBhbmVFbmFibGVkKSB7XHJcblx0ICAgICAgICAgICAgZW1iZWRVcmwgKz0gXCImZmlsdGVyUGFuZUVuYWJsZWQ9ZmFsc2VcIjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBlbWJlZFVybDtcclxuXHQgICAgfTtcclxuXHQgICAgLy8gQXR0cmlidXRlIHVzZWQgdG8gc3BlY2lmeSBpZCBmb3IgcmVwb3J0IGFuZCBzaW11bHRhbmVvdXNseSB1c2VkIHRvIGtub3cgd2hpY2ggdHlwZSBvZiBvYmplY3QgdGhlIGlkIGlzIGZvci5cclxuXHQgICAgUmVwb3J0LmF0dHJpYnV0ZSA9ICdwb3dlcmJpLXJlcG9ydCc7XHJcblx0ICAgIHJldHVybiBSZXBvcnQ7XHJcblx0fShlbWJlZF8xLmRlZmF1bHQpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUmVwb3J0O1xyXG5cclxuXHJcbi8qKiovIH0sXHJcbi8qIDMgKi9cclxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcblxyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciB1dGlsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xyXG5cdHZhciBFbWJlZCA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIEVtYmVkKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuXHQgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0ICAgICAgICAvLyBUT0RPOiBDaGFuZ2Ugd2hlbiBPYmplY3QuYXNzaWduIGlzIGF2YWlsYWJsZS5cclxuXHQgICAgICAgIHRoaXMub3B0aW9ucyA9IHV0aWxfMS5kZWZhdWx0LmFzc2lnbih7fSwgRW1iZWQuZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cdCAgICAgICAgdmFyIGVtYmVkVXJsID0gdGhpcy5nZXRFbWJlZFVybCgpO1xyXG5cdCAgICAgICAgdmFyIGlmcmFtZUh0bWwgPSBcIjxpZnJhbWUgc3R5bGU9XFxcIndpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7XFxcIiBzcmM9XFxcIlwiICsgZW1iZWRVcmwgKyBcIlxcXCIgc2Nyb2xsaW5nPVxcXCJub1xcXCIgYWxsb3dmdWxsc2NyZWVuPVxcXCJ0cnVlXFxcIj48L2lmcmFtZT5cIjtcclxuXHQgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBpZnJhbWVIdG1sO1xyXG5cdCAgICAgICAgdGhpcy5pZnJhbWUgPSB0aGlzLmVsZW1lbnQuY2hpbGROb2Rlc1swXTtcclxuXHQgICAgICAgIHRoaXMuaWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLmxvYWQuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG5cdCAgICB9XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBIYW5kbGVyIGZvciB3aGVuIHRoZSBpZnJhbWUgaGFzIGZpbmlzaGVkIGxvYWRpbmcgdGhlIHBvd2VyYmkgcGxhY2Vob2xkZXIgcGFnZS5cclxuXHQgICAgICogVGhpcyBpcyB1c2VkIHRvIGluamVjdCBjb25maWd1cmF0aW9uIG9wdGlvbnMgc3VjaCBhcyBhY2Nlc3MgdG9rZW4sIGxvYWRBY3Rpb24sIGV0Y1xyXG5cdCAgICAgKiB3aGljaCBhbGxvdyBpZnJhbWUgdG8gbG9hZCB0aGUgYWN0dWFsIHJlcG9ydCB3aXRoIGF1dGhlbnRpY2F0aW9uLlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudCk7XHJcblx0ICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSB0aGlzLmdldEFjY2Vzc1Rva2VuKCk7XHJcblx0ICAgICAgICB2YXIgaW5pdEV2ZW50QXJncyA9IHtcclxuXHQgICAgICAgICAgICBtZXNzYWdlOiB7XHJcblx0ICAgICAgICAgICAgICAgIGFjdGlvbjogdGhpcy5vcHRpb25zLmxvYWRBY3Rpb24sXHJcblx0ICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcclxuXHQgICAgICAgICAgICAgICAgd2lkdGg6IGNvbXB1dGVkU3R5bGUud2lkdGgsXHJcblx0ICAgICAgICAgICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHRcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgdXRpbF8xLmRlZmF1bHQucmFpc2VDdXN0b21FdmVudCh0aGlzLmVsZW1lbnQsICdlbWJlZC1pbml0JywgaW5pdEV2ZW50QXJncyk7XHJcblx0ICAgICAgICB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGluaXRFdmVudEFyZ3MubWVzc2FnZSksICcqJyk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHZXQgYWNjZXNzIHRva2VuIGZyb20gZmlyc3QgYXZhaWxhYmxlIGxvY2F0aW9uOiBvcHRpb25zLCBhdHRyaWJ1dGUsIGdsb2JhbC5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5nZXRBY2Nlc3NUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiB8fCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdwb3dlcmJpLWFjY2Vzcy10b2tlbicpIHx8IHRoaXMub3B0aW9ucy5nZXRHbG9iYWxBY2Nlc3NUb2tlbigpO1xyXG5cdCAgICAgICAgaWYgKCFhY2Nlc3NUb2tlbikge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjY2VzcyB0b2tlbiB3YXMgZm91bmQgZm9yIGVsZW1lbnQuIFlvdSBtdXN0IHNwZWNpZnkgYW4gYWNjZXNzIHRva2VuIGRpcmVjdGx5IG9uIHRoZSBlbGVtZW50IHVzaW5nIGF0dHJpYnV0ZSAncG93ZXJiaS1hY2Nlc3MtdG9rZW4nIG9yIHNwZWNpZnkgYSBnbG9iYWwgdG9rZW4gYXQ6IHBvd2VyYmkuYWNjZXNzVG9rZW4uXCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogR2V0IGVtYmVkIHVybCBmcm9tIGZpcnN0IGF2YWlsYWJsZSBsb2NhdGlvbjogb3B0aW9ucywgYXR0cmlidXRlLlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmdldEVtYmVkVXJsID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGVtYmVkVXJsID0gdGhpcy5vcHRpb25zLmVtYmVkVXJsIHx8IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3Bvd2VyYmktZW1iZWQnKTtcclxuXHQgICAgICAgIHJldHVybiBlbWJlZFVybDtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIFJlcXVlc3QgdGhlIGJyb3dzZXIgdG8gbWFrZSB0aGUgY29tcG9uZW50cyBpZnJhbWUgZnVsbHNjcmVlbi5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5mdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIHJlcXVlc3RGdWxsU2NyZWVuID0gdGhpcy5pZnJhbWUucmVxdWVzdEZ1bGxzY3JlZW4gfHwgdGhpcy5pZnJhbWUubXNSZXF1ZXN0RnVsbHNjcmVlbiB8fCB0aGlzLmlmcmFtZS5tb3pSZXF1ZXN0RnVsbFNjcmVlbiB8fCB0aGlzLmlmcmFtZS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbjtcclxuXHQgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuLmNhbGwodGhpcy5pZnJhbWUpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRXhpdCBmdWxsc2NyZWVuLlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmV4aXRGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKCF0aGlzLmlzRnVsbHNjcmVlbih0aGlzLmlmcmFtZSkpIHtcclxuXHQgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgZXhpdEZ1bGxzY3JlZW4gPSBkb2N1bWVudC5leGl0RnVsbHNjcmVlbiB8fCBkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuIHx8IGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8IGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW47XHJcblx0ICAgICAgICBleGl0RnVsbHNjcmVlbi5jYWxsKGRvY3VtZW50KTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIFJldHVybiB0cnVlIGlmIGlmcmFtZSBpcyBmdWxsc2NyZWVuLFxyXG5cdCAgICAgKiBvdGhlcndpc2UgcmV0dXJuIGZhbHNlXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5wcm90b3R5cGUuaXNGdWxsc2NyZWVuID0gZnVuY3Rpb24gKGlmcmFtZSkge1xyXG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSBbJ2Z1bGxzY3JlZW5FbGVtZW50JywgJ3dlYmtpdEZ1bGxzY3JlZW5FbGVtZW50JywgJ21vekZ1bGxzY3JlZW5TY3JlZW5FbGVtZW50JywgJ21zRnVsbHNjcmVlbkVsZW1lbnQnXTtcclxuXHQgICAgICAgIHJldHVybiBvcHRpb25zLnNvbWUoZnVuY3Rpb24gKG9wdGlvbikgeyByZXR1cm4gZG9jdW1lbnRbb3B0aW9uXSA9PT0gaWZyYW1lOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIERlZmF1bHQgb3B0aW9ucyBmb3IgZW1iZWRkYWJsZSBjb21wb25lbnQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5kZWZhdWx0T3B0aW9ucyA9IHtcclxuXHQgICAgICAgIGZpbHRlclBhbmVFbmFibGVkOiB0cnVlXHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBFbWJlZDtcclxuXHR9KCkpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHRleHBvcnRzLmRlZmF1bHQgPSBFbWJlZDtcclxuXHJcblxyXG4vKioqLyB9LFxyXG4vKiA0ICovXHJcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xyXG5cclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgVXRpbHMgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBVdGlscygpIHtcclxuXHQgICAgfVxyXG5cdCAgICBVdGlscy5yYWlzZUN1c3RvbUV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnREYXRhKSB7XHJcblx0ICAgICAgICB2YXIgY3VzdG9tRXZlbnQ7XHJcblx0ICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgICAgICAgIGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xyXG5cdCAgICAgICAgICAgICAgICBkZXRhaWw6IGV2ZW50RGF0YSxcclxuXHQgICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcclxuXHQgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxyXG5cdCAgICAgICAgICAgIH0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgY3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcclxuXHQgICAgICAgICAgICBjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnROYW1lLCB0cnVlLCB0cnVlLCBldmVudERhdGEpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcclxuXHQgICAgICAgIGlmIChjdXN0b21FdmVudC5kZWZhdWx0UHJldmVudGVkIHx8ICFjdXN0b21FdmVudC5yZXR1cm5WYWx1ZSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBpbmxpbmVFdmVudEF0dHIgPSAnb24nICsgZXZlbnROYW1lLnJlcGxhY2UoJy0nLCAnJyk7XHJcblx0ICAgICAgICB2YXIgaW5saW5lU2NyaXB0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoaW5saW5lRXZlbnRBdHRyKTtcclxuXHQgICAgICAgIGlmIChpbmxpbmVTY3JpcHQpIHtcclxuXHQgICAgICAgICAgICBldmFsLmNhbGwoZWxlbWVudCwgaW5saW5lU2NyaXB0KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgVXRpbHMuZmluZEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgeHMpIHtcclxuXHQgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh4cykpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXR0ZW1wdGVkIHRvIGNhbGwgZmluZCB3aXRoIHNlY29uZCB0aGF0IHdhcyBub3QgYW4gYXJyYXkuIFlvdSBwYXNzZWQ6IFwiICsgeHMpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIGluZGV4O1xyXG5cdCAgICAgICAgeHMuc29tZShmdW5jdGlvbiAoeCwgaSkge1xyXG5cdCAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoeCkpIHtcclxuXHQgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgICAgIHJldHVybiBpbmRleDtcclxuXHQgICAgfTtcclxuXHQgICAgVXRpbHMuZmluZCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHhzKSB7XHJcblx0ICAgICAgICB2YXIgaW5kZXggPSBVdGlscy5maW5kSW5kZXgocHJlZGljYXRlLCB4cyk7XHJcblx0ICAgICAgICByZXR1cm4geHNbaW5kZXhdO1xyXG5cdCAgICB9O1xyXG5cdCAgICBVdGlscy5yZW1vdmUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB4cykge1xyXG5cdCAgICAgICAgdmFyIGluZGV4ID0gVXRpbHMuZmluZEluZGV4KHByZWRpY2F0ZSwgeHMpO1xyXG5cdCAgICAgICAgeHMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHQgICAgfTtcclxuXHQgICAgLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXHJcblx0ICAgIC8vIFRPRE86IHJlcGxhY2UgaW4gZmF2b3Igb2YgdXNpbmcgcG9seWZpbGxcclxuXHQgICAgVXRpbHMuYXNzaWduID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuXHQgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciB0YXJnZXQgPSBhcmdzWzBdO1xyXG5cdCAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG5cdCAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xyXG5cdCAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcclxuXHQgICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcclxuXHQgICAgICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XHJcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIFV0aWxzO1xyXG5cdH0oKSk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdGV4cG9ydHMuZGVmYXVsdCA9IFV0aWxzO1xyXG5cclxuXHJcbi8qKiovIH0sXHJcbi8qIDUgKi9cclxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcblxyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0fTtcclxuXHR2YXIgZW1iZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XHJcblx0dmFyIFRpbGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoVGlsZSwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gVGlsZShlbGVtZW50LCBvcHRpb25zKSB7XHJcblx0ICAgICAgICAvKiogRm9yY2UgbG9hZEFjdGlvbiBvbiBvcHRpb25zIHRvIG1hdGNoIHRoZSB0eXBlIG9mIGNvbXBvbmVudC4gVGhpcyBpcyByZXF1aXJlZCB0byBib290c3RyYXAgaWZyYW1lLiAqL1xyXG5cdCAgICAgICAgb3B0aW9ucy5sb2FkQWN0aW9uID0gJ2xvYWRUaWxlJztcclxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGVsZW1lbnQsIG9wdGlvbnMpO1xyXG5cdCAgICB9XHJcblx0ICAgIFRpbGUucHJvdG90eXBlLmdldEVtYmVkVXJsID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGVtYmVkVXJsID0gX3N1cGVyLnByb3RvdHlwZS5nZXRFbWJlZFVybC5jYWxsKHRoaXMpO1xyXG5cdCAgICAgICAgaWYgKCFlbWJlZFVybCkge1xyXG5cdCAgICAgICAgICAgIHZhciBkYXNoYm9hcmRJZCA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3Bvd2VyYmktZGFzaGJvYXJkJyk7XHJcblx0ICAgICAgICAgICAgdmFyIHRpbGVJZCA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3Bvd2VyYmktdGlsZScpO1xyXG5cdCAgICAgICAgICAgIGlmICghKGRhc2hib2FyZElkICYmIHRpbGVJZCkpIHtcclxuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW1iZWQgdXJsIGNhbm5vdCBiZSBjb25zdHJ1Y3RlZC4gJ3Bvd2VyYmktZW1iZWQnIGF0dHJpYnV0ZSB3YXMgbm90IHNwZWNpZmllZCBhbmQgdGhlIGZhbGxiYWNrIHRvICdwb3dlcmJpLWRhc2hib2FyZCcgYW5kICdwb3dlcmJpLXRpbGUnIHdlcmUgbm90IHNwZWNpZmllZCBlaXRoZXIuXCIpO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBlbWJlZFVybCA9IFwiaHR0cHM6Ly9hcHAucG93ZXJiaS5jb20vZW1iZWQ/ZGFzaGJvYXJkSWQ9XCIgKyBkYXNoYm9hcmRJZCArIFwiJnRpbGVJZD1cIiArIHRpbGVJZDtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBlbWJlZFVybDtcclxuXHQgICAgfTtcclxuXHQgICAgVGlsZS5hdHRyaWJ1dGUgPSAncG93ZXJiaS10aWxlJztcclxuXHQgICAgcmV0dXJuIFRpbGU7XHJcblx0fShlbWJlZF8xLmRlZmF1bHQpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVGlsZTtcclxuXHJcblxyXG4vKioqLyB9XHJcbi8qKioqKiovIF0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb3dlcmJpLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
